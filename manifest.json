{
  "name": "Hubspot",
  "description": "Sync a Hubspot Channel whenever a User enters or leaves a Segment",
  "tags": ["outgoing", "incoming", "batch", "oneColumn"],
  "admin" : "/auth/",
  "picture": "picture.png",
  "version": "0.0.1",
  "settings": [],
  "private_settings":[
    {
      "name": "synchronized_segments",
      "title": "Segments",
      "description": "Post to Hubspot when users match these segments (Empty to send everyone)",
      "default": [],
      "type": "array",
      "format": "segment"
    },
    {
      "name": "token",
      "title": "Token",
      "type": "string",
      "format": "hidden"
    },
    {
      "name": "portal_id",
      "title": "Portal ID",
      "type": "string",
      "format": "hidden"
    },
    {
      "name": "refresh_token",
      "title": "RefreshToken",
      "type": "string",
      "format": "hidden"
    },
    {
      "name": "last_fetch_started_at",
      "description": "Last time fetched at operation was started",
      "type": "string",
      "format": "hidden"
    },
    {
      "name": "fetch_count",
      "description": "Count of contacts already fetched from Hubspot",
      "type": "number",
      "format": "hidden"
    },
    {
      "name": "is_fetch_completed",
      "type": "boolean",
      "default": false,
      "format": "hidden"
    },
    {
      "name": "additional_sync_fields",
      "title": "Custom Fields Sync (Hubspot to Hull)",
      "type": "array",
      "format": "table",
      "items": {
        "type": "object",
        "properties": {
          "name": {
            "title": "Hubspot Field ID",
            "type": "string",
            "format": "string"
          },
          "hull": {
            "title": "Hull Field ID",
            "type": "string",
            "format": "trait",
            "pattern": "^[0-9a-zA-Z_]+$"
          }
        }
      }
    }
  ],
  "deployment_settings": [],
  "resources": [],
  "readme": "readme.md",
  "ui": false,
  "subscriptions": [
    {
      "url": "/notify"
    }
  ],
  "schedules": [
    {
      "url": "/sync",
      "type": "cron",
      "value": "0 * * * *"
    },
    {
      "url": "/monitor/checkToken",
      "type": "cron",
      "value": "0 * * * *"
    }
 ]
}
